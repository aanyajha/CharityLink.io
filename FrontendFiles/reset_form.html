<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Request Password Reset</title>
</head>
<body>
    <h1>Request Password Reset</h1>
    <form method="POST">
        <label id="word">Email: </label>
        <input type="email" id="email" required>
        <br>
        <p id="confirmation">
        Email Sent!
        </p>
        <button type="submit" id="submit" onclick="sendPass()">Submit</button>
    </form>
</body


<style>
#confirmation {
  display: none;
}
</style>

<script>
function sendPass() {

	//email stuff, Aanya is figuring that out
  
  /*
  if (email has error sending) {
  	document.getElementById("confirmation").innerHTML = "Error with sending. Try again."
  	return;
  }
  */
  const email = document.getElementById("email").value;
  const token = `http://172.174.33.35:8080/api/password/reset?email=${email}`;
  const xhr = new XMLHttpRequest();
  xhr.open("GET", token, true);
  
  document.getElementById("word").innerHTML = "Token: ";
  
  document.getElementById("confirmation").style.display = "inline";
  
  document.getElementById("email").value = "";
  console.log(token);
  xhr.send();
  
  document.getElementById("submit").onclick = function () { verifyToken(); };

}

function verifyToken(token) {
//let aanya return to me the right token
/*
	var correct = 
*/
var token = document.getElementById("email").value;
alert(token); //this is just for testing purposes

/*if (token != correct) {

	document.getElementById("confirmation").innerHTML = "The password reset token is invalid or has expired. Please try again or request another password reset."

}
*/

return;
}
</script>
